/*! step10 2017-04-20 */

function Buttons(){this.on=1;this.update(1);for(var a=1;a<=3;a++)this.configButton(a)}function Simon(a){this.form=$(a),this.configureButton(0,"red"),this.configureButton(1,"green"),this.configureButton(2,"blue"),this.configureButton(3,"yellow"),this.state="initial",this.sequence=[],this.current=0,this.ValueSim=[],this.ValueUser=[],this.level=0,this.sequence.push(Math.floor(4*Math.random())),this.play()}Buttons.prototype.configButton=function(a){var b=3==a?1:a+1,c=this;$("#b"+a).click(function(){c.on==a&&c.update(b)})},Buttons.prototype.update=function(a){this.on=a,$("#b1").css("background-color",1==this.on?"red":"green"),$("#b2").css("background-color",2==this.on?"red":"green"),$("#b3").css("background-color",3==this.on?"red":"green"),$("#b1").html(1==this.on?"Press Me":"&nbsp;"),$("#b2").html(2==this.on?"Press Me":"&nbsp;"),$("#b3").html(3==this.on?"Press Me":"&nbsp;")},Simon.prototype.configureButton=function(a, b){var c=$(this.form.find("input").get(a)),d=this;c.click(function(a){document.getElementById(b).currentTime=0,"enter"===d.state&&(b!=d.ValueSim[d.level]&&(document.getElementById("buzzer").play(),d.ValueSim=[],d.ValueUser=[],d.sequence=[],d.sequence.push(Math.floor(4*Math.random())),d.level=0,d.state="restart",window.setTimeout(function(){d.play()},2e3)),b===d.ValueSim[d.level]&&(d.level+=1,d.ValueUser.push(b),document.getElementById(b).play(),d.level===d.ValueSim.length&&(d.ValueSim=[],d.ValueUser=[],d.level=0,d.sequence.push(Math.floor(4*Math.random())),window.setTimeout(function(){d.play()},2e3))))}),c.mousedown(function(a){c.css("background-color",b)}),c.mouseup(function(a){c.css("background-color","lightgrey")})},Simon.prototype.play=function(){this.state="play",this.current=0,this.playCurrent()},Simon.prototype.playCurrent=function(){var a=this;if(a.current<a.sequence.length){var b=["red","green","blue","yellow"];document.getElementById(b[this.sequence[this.current]]).play(),this.ValueSim.push(b[this.sequence[this.current]]),this.buttonOn(-1),this.buttonOn(this.sequence[this.current]),this.current++,window.setTimeout(function(){a.playCurrent()},1e3)}else a.state="enter",this.buttonOn(-1)},Simon.prototype.buttonOn=function(a){if(-1===a){$(this.form.find("input").get(0)).css("background-color","lightgrey");$(this.form.find("input").get(1)).css("background-color","lightgrey");$(this.form.find("input").get(2)).css("background-color","lightgrey");$(this.form.find("input").get(3)).css("background-color","lightgrey")}else{var b=$(this.form.find("input").get(a)),c=["red","green","blue","yellow"],d=c[this.sequence[this.current]];b.css("background-color",d)}};